webpackJsonp([1,4],{"+KqN":function(t,e){t.exports='<article class="sections">\r\n  <section>\r\n    <h1>Quand ?</h1>\r\n    <p>\r\n      Une majorité d\'accidents sont survenus le vendredi en 2015. Également, la plupart des accidents se sont produits\r\n      durant les mois de janvier et de février.\r\n    </p>\r\n      <div class="graphics-wrapper">\r\n        <tabs>\r\n          <tab tabTitle="Vue générale">\r\n            <div class="container">\r\n              <div class="item">\r\n                <barchart *ngIf="barChartMonthConfig" [config]="barChartMonthConfig"></barchart>\r\n              </div>\r\n              <div class="item">\r\n                <barchart *ngIf="barChartDaysOfTheWeekConfig" [config]="barChartDaysOfTheWeekConfig"></barchart>\r\n              </div>\r\n            </div>\r\n          </tab>\r\n          <tab tabTitle="Vue par jours">\r\n            <heatmapday [dataset]="dailyAccidentDataset"></heatmapday>\r\n          </tab>\r\n          <tab tabTitle="Vue par heures">\r\n            <heatmaphour [dataset]="hourlyAccidentDataset"></heatmaphour>\r\n          </tab>\r\n        </tabs>\r\n      </div>\r\n  </section>\r\n</article>\r\n'},"+edA":function(t,e,n){"use strict";var i=n("3j3K"),r=n("EbZC");n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.ngAfterContentInit=function(){0===this.tabs.filter(function(t){return t.active}).length&&this.selectTab(this.tabs.first)},t.prototype.selectTab=function(t){this.tabs.toArray().forEach(function(e){return e.active=e==t})},t}();o([n.i(i.ContentChildren)(r.a),a("design:type","function"==typeof(c=void 0!==i.QueryList&&i.QueryList)&&c||Object)],s.prototype,"tabs",void 0),s=o([n.i(i.Component)({selector:"tabs",template:n("u4sc"),styles:[n("fQyF")]})],s);var c},"+jiH":function(t,e,n){"use strict";var i=n("3j3K"),r=n("Fzro"),o=n("eErF"),a=(n.n(o),n("Za4h"));n.n(a);n.d(e,"a",function(){return l});var s=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t){this.http=t,this.mrcPopulation=this.loadMRCPopulationData()}return t.prototype.loadMRCPopulationData=function(){return this.http.get("assets/data/population_mrc.csv").toPromise().then(function(t){var e=t.text();return a.csv.parse(e,function(t){return{mrcCode:+t.CodeMRC,mrc:t.MRC,raCode:+t.RA,population2015:+t.Population2015}})})},t}();l=s([n.i(i.Injectable)(),c("design:paramtypes",["function"==typeof(h=void 0!==r.b&&r.b)&&h||Object])],l);var h},"/uoO":function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,".map-wrapper{position:absolute;top:1px;right:1px;bottom:0;left:1px}",""]),t.exports=t.exports.toString()},"/v7D":function(t,e,n){"use strict";var i=n("3j3K"),r=n("Wj5D"),o=n("M4fF");n.n(o);n.d(e,"a",function(){return c});var a=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this.accidentService=t,this.hourlyAccidentDataset=[],this.dailyAccidentDataset=[]}return t.prototype.ngOnInit=function(){this.initializeGraphics(),this.accidentService.onDataChanged.subscribe(this.initializeGraphics.bind(this))},t.prototype.initializeGraphics=function(){var t=this;this.accidentService.accidentsPerMonths.then(function(e){console.log(e),t.barChartMonthConfig={height:250,width:500,margin:{top:25,right:40,bottom:40,left:80},title:"Accidents par mois",dataset:e}}),this.accidentService.accidentsPerDaysOfTheWeek.then(function(e){t.barChartDaysOfTheWeekConfig={height:250,width:500,margin:{top:25,right:20,bottom:40,left:60},title:"Accidents par jours de la semaine",dataset:e}}),this.accidentService.hourlyAccidents.then(function(e){t.hourlyAccidentDataset=e,t.dailyAccidentDataset=o(e).groupBy(function(t){return t.month+"-"+t.day+"-"+t.weekday}).toPairs().map(function(t){var e=t[0].split("-");return{month:+e[0],day:+e[1],weekday:+e[2],val:o.reduce(t[1],function(t,e){return t+e.val},0)}}).sortBy(["month","day"]).value()})},t}();c=a([n.i(i.Component)({selector:"when-view",template:n("+KqN"),styles:[n("O9yW")]}),s("design:paramtypes",["function"==typeof(l=void 0!==r.a&&r.a)&&l||Object])],c);var l},0:function(t,e,n){t.exports=n("x35b")},"0fTb":function(t,e){t.exports='<article>\r\n  <div id="home-container">\r\n    <img id="logo" alt="logo" src="assets/img/lys.svg">\r\n    <h1>Accidents de la route<br>survenus au Québec</h1>\r\n    <hr>\r\n    <h2>2015</h2>\r\n  </div>\r\n  <p class="reference"><a href="https://commons.wikimedia.org/wiki/File:Fleur-de-lis-fill.svg">Image</a> par Frater5 /\r\n    <a href="https://creativecommons.org/licenses/by-sa/3.0/deed.en">CC BY-SA</a></p>\r\n</article>\r\n'},"17re":function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,":host .container{width:100%;height:100%}:host /deep/ #container{width:100%;height:100%;padding:50px}:host /deep/ rect.bordered{stroke:#e6e6e6;stroke-width:2px}:host /deep/ rect.no-border{stroke-width:0px}:host /deep/ .label{font-size:9pt;fill:#000}:host /deep/ svg{vertical-align:top}:host /deep/ .legend-title{font-size:11pt}",""]),t.exports=t.exports.toString()},"2RnA":function(t,e){},"3YJf":function(t,e,n){"use strict";var i=n("3j3K"),r=n("Wj5D");n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this.accidentService=t,this.filters={entities:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],criteria:{type:-1,gravity:-1,weather:-1,zone:-1},period:{startDate:{},endDate:{}},location:{region:{},mrc:{}}}}return Object.defineProperty(t.prototype,"currentIndex",{set:function(t){this.visible=t>=3&&t<=5},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(){this.accidentService.applyFilters(this.filters)},t}();o([n.i(i.Input)(),a("design:type",Number),a("design:paramtypes",[Number])],s.prototype,"currentIndex",null),s=o([n.i(i.Component)({selector:"filters-panel",template:n("Fn8W"),styles:[n("pOuB")]}),a("design:paramtypes",["function"==typeof(c=void 0!==r.a&&r.a)&&c||Object])],s);var c},"6Jx0":function(t,e){t.exports='<article>\r\n  <img id="accident" alt="accident" src="assets/img/accident.svg">\r\n  <p>Il y a eu un total de <strong>90 000</strong> accidents au Québec en 2015.</p>\r\n  <p><strong>2000</strong> d\'entre-eux ont été mortels.</p>\r\n  <p><strong>3568</strong> personnes sont décédés</p>\r\n  <p><strong>3068</strong> automobilistes, <strong>450</strong> camionneurs et <strong>50</strong> cyclistes.</p>\r\n  <p class="reference">\r\n    Image par <a href="http://www.freepik.com" title="Freepik">Freepik</a> de <a href="http://www.flaticon.com" title="Flaticon">flaticon</a> /\r\n    <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>\r\n  </p>\r\n</article>\r\n'},"6jYp":function(t,e,n){"use strict";var i=n("3j3K"),r=n("ErHN"),o=n("Za4h"),a=(n.n(o),n("8hZP")),s=(n.n(a),n("M4fF")),c=(n.n(s),n("mdqA")),l=(n.n(c),n("nrd6"));n.n(l);n.d(e,"a",function(){return u});var h=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){var t=this;if(this.json&&this.config){var e=this.config,n=o.select(this.element.nativeElement);n.html(""),n.attr("id","map").style({width:"100%",height:"100%"});var i=this.linkDivToLeaflet("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}"),r=this.linkD3toLeaflet(i),l=r[0],h=r[1],d=s.tail(c.Reds[9]),u=(s.minBy(e,"totalAccidents"),s.maxBy(e,"totalAccidents"),o.scale.quantile().domain(s(e).map(function(t){return t.totalAccidents}).sort().value()).range(d)),p=this.createPath(i),f=n.select("svg g").append("g").attr("id","quebecmrc").selectAll("path").data(this.json.features).enter().append("path").attr({class:function(n){var i=s.find(e,function(t){return t.code===+n.properties.MRS_CO_MRC});return t.normalizeName(i.name)},d:p,fill:function(t){var n=s.find(e,function(e){return e.code===+t.properties.MRS_CO_MRC}).totalAccidents;return u(n?n:0)},opacity:.8,stroke:"black","stroke-width":1,"stroke-opacity":.2,"data-mrc":function(t){var n=s.find(e,function(e){return e.code===+t.properties.MRS_CO_MRC});return JSON.stringify(n)}}),g=a().attr("class","d3-tip").offset([-10,0]).html(function(){var t=o.select(this),e=JSON.parse(t.attr("data-mrc"));return"MRC : "+e.name+"<br>Nombre d'accidents : "+e.totalAccidents+"<br>Nombre d'habitants : "+e.population});f.on("mouseover",g.show).on("mouseout",g.hide),l.call(g);var m=function(e,n,i,r,o){var a=t.positionSVG,s=t.featuresUpdate;return function(){a(e,n,i,o);s(r,i)}};i.on("zoom",m(l,h,p,f,this.json)),m(l,h,p,f,this.json)(),this.createMapLegend(u,"Nombre d'accidents")}},t.prototype.linkDivToLeaflet=function(t){var e="Tiles courtesy of <a href='http://openstreetmap.se/=' target='_blank'>OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a>",n=new l.LatLngBounds(new l.LatLng(42,-85),new l.LatLng(60,-50)),i=l.tileLayer(t,{attribution:e,maxZoom:7,minZoom:4});return new l.Map("map",{zoom:4.5,center:n.getCenter(),layers:[i],maxBounds:n,maxBoundsViscosity:.75})},t.prototype.ngAfterViewInit=function(){this.config},t.prototype.linkD3toLeaflet=function(t){var e=o.select(t.getPanes().overlayPane).append("svg");return[e,e.append("g").attr("class","leaflet-zoom-hide")]},t.prototype.createPath=function(t){var e=o.geo.transform({point:this.projectPoint(t)});return o.geo.path().projection(e)},t.prototype.projectPoint=function(t){return function(e,n){var i=t.latLngToLayerPoint(new l.LatLng(n,e));this.stream.point(i.x,i.y)}},t.prototype.positionSVG=function(t,e,n,i){var r=n.bounds(i),o=r[0],a=r[1];return t.attr("width",a[0]-o[0]).attr("height",a[1]-o[1]).style("left",o[0]+"px").style("top",o[1]+"px"),e.attr("transform","translate("+-o[0]+","+-o[1]+")"),r},t.prototype.createMapLegend=function(t,e){var i={top:60,right:0,bottom:20,left:25},a={width:80,height:20},s=a.width*t.quantiles().length,c=4*a.height,l=o.select(this.element.nativeElement.parentNode).append("svg").attr({id:"svgLegend",width:960,height:c+i.top+i.bottom}).append("g").attr("transform","translate("+i.left+","+i.top+")");n.i(r.a)(l,e,t,a).attr("transform","translate("+(480-s/2)+", 0)")},t.prototype.featuresUpdate=function(t,e){t.attr("d",e)},t.prototype.normalizeName=function(t){return t.replace(/\s+/g,"").replace(/\.|\'/g,"").toLowerCase()},t.prototype.setActiveView=function(t){var e=this.config,i=s.tail(c.Reds[9]),a=function(t){return 0};"absolute"===t?a=function(t){return t.totalAccidents}:"relative"===t&&(a=function(t){return 1e4*t.totalAccidents/t.population});var l=s(e).map(a).sort().value(),h=o.scale.quantile().domain(l).range(i);this.updateMapColor(e,h,a);var d=o.select("#svgLegend .gLegend"),u={width:80,height:20};n.i(r.b)(d,h,u),this.setLegendText(d.select("text"),"Nombre d'accidents par 10 000 habitants")},t.prototype.updateMapColor=function(t,e,n){o.selectAll("#quebecmrc path").transition().duration(750).attr({fill:function(i){var r=s.find(t,function(t){return t.code===+i.properties.MRS_CO_MRC}),o=n(r);return e(o?o:0)}})},t.prototype.setLegendText=function(t,e){t.style("opacity",0).text(e).transition().duration(1e3).style("opacity",1)},t}();h([n.i(i.ViewChild)("map"),d("design:type","function"==typeof(p=void 0!==i.ElementRef&&i.ElementRef)&&p||Object)],u.prototype,"element",void 0),h([n.i(i.Input)(),d("design:type",Object)],u.prototype,"json",void 0),h([n.i(i.Input)(),d("design:type",Array)],u.prototype,"config",void 0),h([n.i(i.Input)(),d("design:type",String)],u.prototype,"searchText",void 0),u=h([n.i(i.Component)({selector:"geomap",template:"\n    <button (click)=\"setActiveView('absolute')\">Accidents totals</button>\n    <button (click)=\"setActiveView('relative')\">Accidents par 10 000 habitants</button>\n    <div #map class='map'></div>\n    <div id=\"container\">\n      <input id='search-bar' placeholder='{{ searchText }}'/>\n      <div #map class='map'></div>\n    </div>\n  ",styles:["\n    :host #container {\n      position: relative;\n      width: 100%;\n      height: 100%;\n    }\n\n    :host #search-bar {\n      position: absolute;\n      top: 10px;\n      right: 10px;\n      z-index: 10;\n    }\n\n    :host /deep/ .background {\n      fill: none;\n      pointer-events: all;\n    }\n  "]})],u);var p},7185:function(t,e,n){"use strict";var i=n("3j3K"),r=n("Wj5D");n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this.accidentService=t,this.hourlyAccidentDataset=[],this.dailyAccidentDataset=[]}return t.prototype.ngOnInit=function(){this.initializeGraphics(),this.accidentService.onDataChanged.subscribe(this.initializeGraphics.bind(this))},t.prototype.initializeGraphics=function(){},t}();s=o([n.i(i.Component)({selector:"who-view",template:n("n+f3")}),a("design:paramtypes",["function"==typeof(c=void 0!==r.a&&r.a)&&c||Object])],s);var c},"9pj6":function(t,e,n){"use strict";function i(t){var e=r.Reds[9],n=o.min(t,function(t){return t.val}),i=o.max(t,function(t){return t.val});return o.scale.quantile().domain([n,e.length-1,i]).range(e)}var r=n("mdqA"),o=(n.n(r),n("Za4h"));n.n(o);e.a=i},EbZC:function(t,e,n){"use strict";var i=n("3j3K");n.d(e,"a",function(){return a});var r=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(){this.active=!1}return t}();r([n.i(i.Input)("tabTitle"),o("design:type",String)],a.prototype,"title",void 0),r([n.i(i.Input)(),o("design:type",Object)],a.prototype,"active",void 0),a=r([n.i(i.Component)({selector:"tab",styles:["\n    .pane{\n      height: 100%;\n    }\n  "],template:'\n    <div [hidden]="!active" class="pane">\n      <ng-content></ng-content>\n    </div>\n  '})],a)},ErHN:function(t,e,n){"use strict";function i(t,e,n,i){var o=t.append("svg"),a=o.append("g");return r(o,e,n,i),a}function r(t,e,n,i){return t.attr({width:"100%",height:"100%",viewBox:"0 0 "+(e+i.left+i.right)+" "+(n+i.top+i.bottom)}).select("g").attr("transform","translate("+i.left+","+i.top+")")}function o(t,e,n,i){var r=t.selectAll(".hour").data(e);return r.append("title"),r.enter().append("rect").attr({x:function(t){return t.row*n.x},y:function(t){return t.col*n.y},rx:4,ry:4,class:"hour bordered",width:n.x,height:n.y}).style("fill",i(0)),r.transition().duration(1e3).style("fill",function(t){return i(t.val)}),r.select("title").text(function(t){return t.val}),r.exit().remove(),r}function a(t,e,n,i){var r=n.quantiles().length,o=t.append("g").attr("class","gLegend");return o.append("text").text(e).attr({x:i.width*r/2,y:0,class:"legend-title"}).style("text-anchor","middle"),s(o,n,i),o}function s(t,e,n){var i=t.selectAll(".legend").data([0].concat(e.quantiles()),function(t){return t});i.enter().append("g").attr("class","legend"),i.append("rect").attr({x:function(t,e){return n.width*e},y:n.height,width:n.width,height:n.height}).attr("fill",function(t){return e(t)}),i.append("text").style("opacity",0).text(function(t){return"≥ "+Math.round(t)}).transition().duration(1e3).style("opacity",1).attr({x:function(t,e){return n.width*e+n.width/2},y:2*n.height+15,class:"label"}).style("text-anchor","middle"),i.exit().remove()}function c(t,e,n){t.append("text").text(n).style({"text-anchor":"middle","text-transform":"capitalize","font-weight":"bold"}).attr({x:0,y:0,transform:"translate("+e/2+", -6)",class:"label"})}e.c=i,e.d=r,e.e=o,e.a=a,e.b=s,e.f=c},Fn8W:function(t,e){t.exports='<form [class.visible]="visible">\r\n  <fieldset>\r\n    <legend>Entités impliquées</legend>\r\n\r\n    <input type="checkbox" name="bus-checkbox" id="bus-checkbox"\r\n           [(ngModel)]="filters.entities[1]" (ngModelChange)="onValueChanged()">\r\n    <label for="bus-checkbox">Autobus</label><br>\r\n\r\n    <input type="checkbox" name="car-checkbox" id="car-checkbox"\r\n           [(ngModel)]="filters.entities[2]" (ngModelChange)="onValueChanged()">\r\n    <label for="car-checkbox">Automobile</label><br>\r\n\r\n    <input type="checkbox" name="truck-checkbox" id="truck-checkbox"\r\n           [(ngModel)]="filters.entities[8]" (ngModelChange)="onValueChanged()">\r\n    <label for="truck-checkbox">Camion</label><br>\r\n\r\n    <input type="checkbox" name="motorbike-checkbox" id="motorbike-checkbox"\r\n           [(ngModel)]="filters.entities[4]" (ngModelChange)="onValueChanged()">\r\n    <label for="motorbike-checkbox">Moto</label><br>\r\n\r\n    <input type="checkbox" name="pedestrian-checkbox" id="pedestrian-checkbox"\r\n           [(ngModel)]="filters.entities[5]" (ngModelChange)="onValueChanged()">\r\n    <label for="pedestrian-checkbox">Piéton</label><br>\r\n\r\n    <input type="checkbox" name="taxi-checkbox" id="taxi-checkbox"\r\n           [(ngModel)]="filters.entities[7]" (ngModelChange)="onValueChanged()">\r\n    <label for="taxi-checkbox">Taxi</label><br>\r\n\r\n    <input type="checkbox" name="emergency-checkbox" id="emergency-checkbox"\r\n           [(ngModel)]="filters.entities[3]" (ngModelChange)="onValueChanged()">\r\n    <label for="emergency-checkbox">Véhicule d\'urgence</label><br>\r\n\r\n    <input type="checkbox" name="rv-checkbox" id="rv-checkbox"\r\n           [(ngModel)]="filters.entities[6]" (ngModelChange)="onValueChanged()">\r\n    <label for="rv-checkbox">Véhicule récréatif</label><br>\r\n\r\n    <input type="checkbox" name="bicycle-checkbox" id="bicycle-checkbox"\r\n           [(ngModel)]="filters.entities[0]" (ngModelChange)="onValueChanged()">\r\n    <label for="bicycle-checkbox">Vélo</label><br>\r\n\r\n    <input type="checkbox" name="others-checkbox" id="others-checkbox"\r\n           [(ngModel)]="filters.entities[9]" (ngModelChange)="onValueChanged()">\r\n    <label for="others-checkbox">Autres</label><br>\r\n  </fieldset>\r\n  <fieldset>\r\n    <legend>Critères</legend>\r\n\r\n    <label for="type-choices">Genre</label>\r\n    <select name="type-choices" id="type-choices" [(ngModel)]="filters.criteria.type" (ngModelChange)="onValueChanged()">\r\n      <option value="-1">Tous</option>\r\n      <option value="4">Collision avec animaux</option>\r\n      <option value="2">Collision avec cycliste</option>\r\n      <option value="5">Collision avec objet fixe</option>\r\n      <option value="1">Collision avec piéton</option>\r\n      <option value="3">Collision avec train</option>\r\n      <option value="0">Collision avec véhicule routier</option>\r\n      <option value="6">Sans collision</option>\r\n      <option value="7">Autres</option>\r\n    </select><br>\r\n\r\n    <label for="gravity-choices">Gravité</label>\r\n    <select name="gravity-choices" id="gravity-choices" [(ngModel)]="filters.criteria.gravity" (ngModelChange)="onValueChanged()">\r\n      <option value="-1">Tous</option>\r\n      <option value="0">Dommages matériels seulement</option>\r\n      <option value="1">Léger</option>\r\n      <option value="2">Grave</option>\r\n      <option value="3">Mortel</option>\r\n    </select><br>\r\n\r\n    <label for="weather-choices">Météo</label>\r\n    <select name="weather-choices" id="weather-choices" [(ngModel)]="filters.criteria.weather" (ngModelChange)="onValueChanged()">\r\n      <option value="-1">Tous</option>\r\n      <option value="15">Averse (pluie forte)</option>\r\n      <option value="13">Brouillard</option>\r\n      <option value="11">Clair</option>\r\n      <option value="17">Neige / grêle</option>\r\n      <option value="12">Nuageux</option>\r\n      <option value="14">Pluie / bruine</option>\r\n      <option value="18">Poudrerie / tempête de neige</option>\r\n      <option value="16">Vent fort</option>\r\n      <option value="19">Verglas</option>\r\n      <option value="99">Autres</option>\r\n    </select><br>\r\n\r\n    <label for="zone-choices">Secteur</label>\r\n    <select name="zone-choices" id="zone-choices" [(ngModel)]="filters.criteria.zone" (ngModelChange)="onValueChanged()">\r\n      <option value="-1">Tous</option>\r\n      <option value="1">Scolaire</option>\r\n      <option value="2">Résidentiel</option>\r\n      <option value="3">Affaires / commercial</option>\r\n      <option value="4">Industriel / manufacturier</option>\r\n      <option value="5">Rural</option>\r\n      <option value="6">Forestier</option>\r\n      <option value="7">Récréatif / parc / camping</option>\r\n      <option value="9">Autres</option>\r\n    </select>\r\n  </fieldset>\r\n  <fieldset>\r\n    <legend>Période</legend>\r\n\r\n    <label for="start-date">Date de départ</label>\r\n    <input type="date" id="start-date"><br>\r\n\r\n    <label for="end-date">Date de fin</label>\r\n    <input type="date" id="end-date">\r\n  </fieldset>\r\n  <fieldset>\r\n    <legend>Localisation</legend>\r\n\r\n    <label for="region-choices">Région</label>\r\n    <select id="region-choices">\r\n      <option></option>\r\n      <option></option>\r\n    </select><br>\r\n\r\n    <label for="mrc-choices">MRC</label>\r\n    <select id="mrc-choices">\r\n      <option></option>\r\n      <option></option>\r\n    </select>\r\n  </fieldset>\r\n</form>\r\n\r\n'},Iksp:function(t,e,n){"use strict";var i=n("3j3K"),r=n("Qbdm"),o=n("Fzro"),a=n("NVOs"),s=n("YWx4"),c=n("i+t5"),l=n("LqA9"),h=n("Ry3Z"),d=n("6jYp"),u=n("Wj5D"),p=n("+jiH"),f=n("Uqjm"),g=n("Tlry"),m=n("Ybm7"),y=n("jTNU"),v=n("X3MM"),b=n("pXPn"),x=n("xC+v"),w=n("/v7D"),M=n("3YJf"),R=n("tXfc"),C=n("7185"),j=n("+edA"),O=n("EbZC"),S=n("mHLs"),D=n("0fHH");n.n(D);n.d(e,"a",function(){return _});var A=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},_=function(){function t(){}return t}();_=A([n.i(i.NgModule)({imports:[r.a,a.a,o.a,y.a.forRoot()],declarations:[s.a,D.MnFullpageDirective,c.a,g.a,S.a,l.a,h.a,m.a,d.a,v.a,b.a,x.a,w.a,M.a,R.a,C.a,j.a,O.a],providers:[u.a,p.a,f.a,D.MnFullpageService],bootstrap:[s.a],schemas:[i.NO_ERRORS_SCHEMA]})],_)},LqA9:function(t,e,n){"use strict";var i=n("3j3K"),r=n("Wj5D"),o=n("ErHN"),a=n("9pj6"),s=n("Za4h"),c=(n.n(s),n("8hZP")),l=(n.n(c),n("M4fF"));n.n(l);n.d(e,"a",function(){return f});var h=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=7,p=6,f=function(){function t(){var t=this;this.legendSize={width:80,height:20},this.cardSize={x:30,y:15},this.nbMonthsPerRow=4,this.hmMargin={top:20,right:20,bottom:20,left:25},this.hmSvgWidth=this.cardSize.x*u+this.hmMargin.left+this.hmMargin.right,this.hmSvgHeight=this.cardSize.y*p+this.hmMargin.top+this.hmMargin.bottom,this.svgMargin={top:20,right:0,bottom:20,left:0},this.svgWidth=this.hmSvgWidth*this.nbMonthsPerRow,this.svgHeight=this.hmSvgHeight*Math.ceil(r.b.length/this.nbMonthsPerRow)+2*this.legendSize.height+30,this.isInitialized=!1,this.getMonthDataset=function(e){var n=l.filter(t.dataset,function(t){return t.month===e}),i=l(n).sortBy("day").head();return l(n).map(function(t){return{month:e,day:t.day,row:t.weekday,col:Math.floor((t.day-1+i.weekday)/u),val:t.val}}).value()}}return t.prototype.ngOnChanges=function(){var t=this;if((this.dataset||0!=this.dataset.length)&&this.isInitialized){console.log("ngOnChanges heatmap");var e=s.select(this.element.nativeElement),i=n.i(a.a)(this.dataset),c=s.selectAll(".dayheatmap > g"),l=n.i(o.e)(c,this.getMonthDataset,this.cardSize,i);l.attr({transform:"translate(0, 5)","data-accident":function(e){return JSON.stringify({month:t.getMonthLabel(e.month),day:e.day,weekday:r.c[e.row],totalAccidents:e.val})}}),this.updateHeatMapTip(e.select("svg"),l);var h=e.select(".gLegend"),d=(n.i(o.b)(h,i,this.legendSize),this.legendSize.width*i.quantiles().length),u=this.svgWidth/2-d/2,p=this.hmSvgHeight*Math.ceil(r.b.length/this.nbMonthsPerRow)+30;h.attr("transform","translate("+u+", "+p+")")}},t.prototype.ngOnInit=function(){var t=this;console.log("ngOnInit heatmap");var e=s.select(this.element.nativeElement);e.html("");var i=n.i(a.a)(this.dataset),c={top:20,right:0,bottom:30,left:0},l=this.hmSvgWidth*this.nbMonthsPerRow,h=this.hmSvgHeight*Math.ceil(r.b.length/this.nbMonthsPerRow)+2*this.legendSize.height+30,d=n.i(o.c)(e,l,h,c),u=d.selectAll(".dayheatmap").data(r.b).enter().append("g").attr({class:"dayheatmap",width:this.hmSvgWidth,height:function(e){return t.hmSvgHeight},transform:function(e){return"translate("+e%t.nbMonthsPerRow*t.hmSvgWidth+","+t.hmSvgHeight*Math.floor(e/t.nbMonthsPerRow)+")"}}).append("g").attr("transform","translate("+this.hmMargin.left+","+this.hmMargin.top+")");n.i(o.f)(u,this.hmSvgWidth-this.hmMargin.left-this.hmMargin.right,this.getMonthLabel);var p=n.i(o.e)(u,this.getMonthDataset,this.cardSize,i);p.attr({transform:"translate("+l/2+", -6)",class:"label","data-accident":function(e){return JSON.stringify({month:t.getMonthLabel(e.month),day:e.day,weekday:r.c[e.row],totalAccidents:e.val})}});var f=n.i(o.a)(d,"Nombre d'accidents",i,this.legendSize),g=this.legendSize.width*i.quantiles().length;f.attr("transform","translate("+(this.svgWidth/2-g/2)+", "+(this.hmSvgHeight*Math.ceil(r.b.length/this.nbMonthsPerRow)+30)+")"),this.updateHeatMapTip(d,p),this.isInitialized=!0},t.prototype.getMonthLabel=function(t){return new Date(2015,t).toLocaleString("fr",{month:"long"})},t.prototype.updateHeatMapTip=function(t,e){s.selectAll(".dayheatmaptip").remove();var n=c().attr("class","d3-tip dayheatmaptip").offset([-10,0]).html(function(){var t=s.select(this),e=JSON.parse(t.attr("data-accident"));return"Date : "+e.weekday+" le "+e.day+" "+e.month+" 2015<br>Nombre d'accidents : "+e.totalAccidents});e.on("mouseover",n.show).on("mouseout",n.hide),t.call(n)},t.prototype.getHoursPerDay=function(){var t=s.format("02d"),e=l.range(24);return l.map(e,function(e){return t(e)+"h"})},t.prototype.getDaysPerMonth=function(t,e){return new Date(t,e,0).getDate()},t}();h([n.i(i.ViewChild)("container"),d("design:type","function"==typeof(g=void 0!==i.ElementRef&&i.ElementRef)&&g||Object)],f.prototype,"element",void 0),h([n.i(i.Input)(),d("design:type",Array)],f.prototype,"dataset",void 0),f=h([n.i(i.Component)({selector:"heatmapday",template:'\n    <div #container class="container"></div>\n  ',styles:[n("17re")]}),d("design:paramtypes",[])],f);var g},MOVZ:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="MOVZ"},O9yW:function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,".container{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;text-align:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.container>.item{position:relative;height:inherit;-ms-flex-preferred-size:50%;flex-basis:50%}.container>.item>h2{margin-top:30px;margin-bottom:5px;font-size:.95em}",""]),t.exports=t.exports.toString()},OzaX:function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,":host{text-align:center}h1{margin-top:10px;font-size:3.2em}h1,h2{color:#404041;font-family:Alegreya,serif;font-weight:400}h2{font-size:2.5em}hr{border-color:#404041;width:150px}#logo{height:150px}#home-container{position:absolute;top:50%;left:0;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}",""]),t.exports=t.exports.toString()},Ry3Z:function(t,e,n){"use strict";var i=n("3j3K"),r=n("Wj5D"),o=n("ErHN"),a=n("9pj6"),s=n("Za4h"),c=(n.n(s),n("8hZP")),l=(n.n(c),n("M4fF"));n.n(l);n.d(e,"a",function(){return p});var h=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=31,p=function(){function t(){var t=this;this.legendSize={width:80,height:20},this.cardSize={x:5,y:5},this.nbMonthsPerRow=6,this.hmMargin={top:20,right:20,bottom:20,left:25},this.svgMargin={top:20,right:0,bottom:20,left:0},this.isInitialized=!1,this.getMonthDataset=function(e){return l(t.dataset).filter(function(t){return t.month===e}).map(function(t){return{month:e,row:t.hour,col:t.day-1,val:t.val}}).value()}}return t.prototype.ngOnChanges=function(){var t=this;if((this.dataset||0!=this.dataset.length)&&this.isInitialized){var e=s.select(this.element.nativeElement),i=this.cardSize.x*this.getHoursPerDay().length+this.hmMargin.left+this.hmMargin.right,c=this.cardSize.y*u+this.hmMargin.top+this.hmMargin.bottom,l=i*this.nbMonthsPerRow,h=c*Math.ceil(r.b.length/this.nbMonthsPerRow)+2*this.legendSize.height+30,d=(n.i(o.d)(e.select("svg"),l,h,this.svgMargin),n.i(a.a)(this.dataset)),p=s.selectAll(".hourheatmap > g"),f=n.i(o.e)(p,this.getMonthDataset,this.cardSize,d);f.attr({transform:"translate(0, 5)","data-accident":function(e){return JSON.stringify({month:t.getMonthLabel(e.month),hour:e.row,day:e.col,weekday:new Date(2015,e.month,e.col).getDay(),totalAccidents:e.val})}}),this.updateHeatMapTip(e.select("svg"),f);var g=e.select(".gLegend"),m=(n.i(o.b)(g,d,this.legendSize),this.legendSize.width*d.quantiles().length),y=l/2-m/2,v=c*Math.ceil(r.b.length/this.nbMonthsPerRow)+30;g.attr("transform","translate("+y+", "+v+")")}},t.prototype.ngOnInit=function(){var t=this,e=s.select(this.element.nativeElement),i=n.i(a.a)(this.dataset),c=this.cardSize.x*this.getHoursPerDay().length+this.hmMargin.left+this.hmMargin.right,l=this.cardSize.y*u+this.hmMargin.top+this.hmMargin.bottom,h=c*this.nbMonthsPerRow,d=(Math.ceil(r.b.length/this.nbMonthsPerRow),this.legendSize.height,{top:20,right:0,bottom:30,left:0}),p=c*this.nbMonthsPerRow,f=l*Math.ceil(r.b.length/this.nbMonthsPerRow)+2*this.legendSize.height+30,g=n.i(o.c)(e,p,f,d),m=g.selectAll("g").data(r.b).enter().append("g").attr({class:"hourheatmap",width:c,height:l,transform:function(e){return"translate("+e%t.nbMonthsPerRow*c+","+l*Math.floor(e/t.nbMonthsPerRow)+")"}}).append("g").attr("transform","translate("+this.hmMargin.left+","+this.hmMargin.top+")");n.i(o.f)(m,c-this.hmMargin.left-this.hmMargin.bottom,this.getMonthLabel);var y=n.i(o.e)(m,this.getMonthDataset,this.cardSize,i);y.attr({x:0,y:0,transform:"translate("+p/2+", -6)","data-accident":function(e){return JSON.stringify({month:t.getMonthLabel(e.month),hour:e.row,day:e.col,weekday:new Date(2015,e.month,e.col).getDay(),totalAccidents:e.val})}});var v=n.i(o.a)(g,"Nombre d'accidents",i,this.legendSize),b=this.legendSize.width*i.quantiles().length;v.attr("transform","translate("+(h/2-b/2)+", "+(l*Math.ceil(r.b.length/this.nbMonthsPerRow)+30)+")"),this.updateHeatMapTip(e.select("svg"),y),this.isInitialized=!0},t.prototype.updateHeatMapTip=function(t,e){var n=c().attr("class","d3-tip").offset([-10,0]).html(function(){var t=s.select(this),e=JSON.parse(t.attr("data-accident"));return"Date : "+r.c[e.weekday]+" le "+e.day+" "+e.month+" 2015 à "+e.hour+"h<br>Nombre d'accidents : "+e.totalAccidents});e.on("mouseover",n.show).on("mouseout",n.hide),t.call(n)},t.prototype.getHoursPerDay=function(){var t=s.format("02d"),e=l.range(24);return l.map(e,function(e){return t(e)+"h"})},t.prototype.getDaysPerMonth=function(t,e){return new Date(t,e,0).getDate()},t.prototype.getMonthLabel=function(t){return new Date(2015,t).toLocaleString("fr",{month:"long"})},t}();h([n.i(i.ViewChild)("container"),d("design:type","function"==typeof(f=void 0!==i.ElementRef&&i.ElementRef)&&f||Object)],p.prototype,"element",void 0),h([n.i(i.Input)(),d("design:type",Object)],p.prototype,"dataset",void 0),p=h([n.i(i.Component)({selector:"heatmaphour",template:"\n    <div #container class='container'></div>\n  ",styles:[n("17re")],styles:["\n    :host /deep/ rect.bordered {\n      stroke-width: 0 !important;\n    }\n  "]}),d("design:paramtypes",[])],p);var f},Tlry:function(t,e,n){"use strict";var i=n("3j3K"),r=n("Za4h"),o=(n.n(r),n("8hZP")),a=(n.n(o),n("rJzN"));n.n(a);n.d(e,"a",function(){return l});var s=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(){this.isInitialized=!1}return t.prototype.ngOnInit=function(){var t=this,e=this.config.margin,n=this.config.height-e.top-e.bottom;this.width=this.config.width-e.left-e.right,this.g=r.select(this.element.nativeElement).append("svg").attr({class:"barchart",width:"100%",height:"100%",viewBox:"0 0 "+(this.width+e.left+e.right)+" "+(n+e.top+e.bottom)}).append("g").attr("transform","translate("+e.left+","+e.top+")"),this.xScale=r.scale.ordinal().rangeRoundBands([0,n],.15),this.yScale=r.scale.linear().range([0,this.width]),this.xAxis=r.svg.axis().scale(this.xScale).orient("left"),this.yAxis=r.svg.axis().scale(this.yScale).orient("bottom").tickFormat(r.format("d")),this.updateDomains();var i=o().attr("class","d3-tip").direction("e").offset([0,10]).html(function(t){return t.value});this.g.call(i),this.g.append("g").attr("class","x axis").call(this.xAxis).selectAll("text").data(this.config.dataset).text(function(t){return t.label}),this.g.append("g").attr("class","y axis").attr("transform","translate(0,"+n+")").call(this.yAxis),this.g.selectAll("rect").data(this.config.dataset).enter().append("rect").attr({class:"bar",x:function(t){return 0},y:function(e){return t.xScale(e.id)},height:this.xScale.rangeBand(),width:function(e){return t.yScale(e.value)}}).on("mouseover",i.show).on("mouseout",i.hide),this.isInitialized=!0},t.prototype.ngOnChanges=function(){var t=this;if(this.isInitialized){var e=1e3;this.updateDomains(),this.g.select(".y.axis").transition().duration(e).call(this.yAxis),this.g.selectAll("rect").data(this.config.dataset).transition().duration(e).attr("width",function(e){return t.yScale(e.value)})}},t.prototype.updateDomains=function(){this.xScale.domain(this.config.dataset.map(function(t){return t.id})),this.yScale.domain([0,r.max(this.config.dataset,function(t){return t.value})])},t}();s([n.i(i.ViewChild)("container"),c("design:type","function"==typeof(h=void 0!==i.ElementRef&&i.ElementRef)&&h||Object)],l.prototype,"element",void 0),s([n.i(i.Input)(),c("design:type","function"==typeof(d=void 0!==a.BarChartConfig&&a.BarChartConfig)&&d||Object)],l.prototype,"config",void 0),l=s([n.i(i.Component)({selector:"horizontal-barchart",template:"\n    <div #container class='container'></div>\n  ",styles:[n("hO/x")]})],l);var h,d},Uqjm:function(t,e,n){"use strict";var i=n("3j3K"),r=n("Fzro"),o=n("eErF"),a=(n.n(o),n("eiri"));n.n(a);n.d(e,"a",function(){return l});var s=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t){this.http=t,this.mrcJson=this.loadQuebecMap()}return t.prototype.loadQuebecMap=function(){return this.http.get("assets/data/mrc_poly.json").toPromise().then(function(t){var e=t.json();return a.feature(e,e.objects.mrc_poly)})},t}();l=s([n.i(i.Injectable)(),c("design:paramtypes",["function"==typeof(h=void 0!==r.b&&r.b)&&h||Object])],l);var h},Wj5D:function(t,e,n){"use strict";var i=n("3j3K"),r=n("Fzro"),o=n("eErF"),a=(n.n(o),n("M4fF")),s=(n.n(a),n("Za4h"));n.n(s);n.d(e,"c",function(){return h}),n.d(e,"b",function(){return d}),n.d(e,"a",function(){return u});var c=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],d=a.range(12),u=function(){function t(t){this.http=t,this.onDataChanged=new i.EventEmitter,this.accidents=this.accidentsFiltered=this.loadData(),this.accidents.then(function(t){return console.log("Nombre d'entrées chargées: "+t.length)}),this.initializeData()}return t.prototype.applyFilters=function(t){this.accidentsFiltered=this.accidents.then(function(e){return e.filter(function(e){return!(void 0===e.entities.find(function(e,n){return e>0&&t.entities[n]})||-1!=t.criteria.zone&&t.criteria.zone!=e.zone||-1!=t.criteria.type&&t.criteria.type!=e.type||-1!=t.criteria.weather&&t.criteria.weather!=e.weather||-1!=t.criteria.gravity&&t.criteria.gravity!=e.gravity)})}),this.initializeData(),this.onDataChanged.emit()},t.prototype.initializeData=function(){this.hourlyAccidents=this.loadHourlyAccidents(),this.accidentsByRA=this.loadAccidentsByRA(),this.accidentsPerDaysOfTheWeek=this.loadAccidentsPerDaysOfTheWeek(),this.accidentsPerMonths=this.loadAccidentsPerMonths(),this.accidentsByRegions=this.loadAccidentByRegions()},t.prototype.loadData=function(){var t="Non précisé",e=[["nb_bicyclette"],["nb_tous_autobus_minibus"],["nb_automobile_camion_leger"],["nb_urgence"],["nb_cyclomoteur","nb_motocyclette"],["NB_VICTIMES_PIETON"],["nb_motoneige","nb_VHR"],["nb_taxi"],["nb_camionLourd_tractRoutier","nb_outil_equipement"],["nb_autres_types","nb_veh_non_precise"]],n=[{id:0,types:[31]},{id:1,types:[32]},{id:2,types:[33]},{id:3,types:[34]},{id:4,types:[35,36,37]},{id:5,types:[40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,59]},{id:6,types:[71,72,73,74,75,99]},{id:7,types:[38,39,""]}],i=[{id:1,zones:[1]},{id:2,zones:[2]},{id:3,zones:[3]},{id:4,zones:[4]},{id:5,zones:[5]},{id:6,zones:[6]},{id:7,zones:[7]},{id:9,zones:[9,0,""]}];return this.http.get("assets/data/rapports-accident-reduit-2015.csv").toPromise().then(function(r){var o=r.text();return s.csv.parse(o,function(r){var o=s.time.format("%Y-%m-%d-%H"),a=r.heure_accdn.split(":")[0];r.DT_ACCDN=a===t?r.DT_ACCDN+"-00":r.DT_ACCDN+"-"+a;var c=o.parse(r.DT_ACCDN),l=/(.+)\s?\((\d+)\s*\)/,h=l.exec(r.REG_ADM),d=l.exec(r.MRC);return{month:c.getMonth(),day:c.getDate(),weekday:c.getDay(),hour:a===t?null:c.getHours(),gravity:+r.gravite,region:h[1],regionCode:+h[2],mrc:d[1],mrcCode:+d[2],weather:+r.CD_COND_METEO,type:n.find(function(t){return-1!=t.types.indexOf(r.CD_GENRE_ACCDN?+r.CD_GENRE_ACCDN:r.CD_GENRE_ACCDN)}).id,zone:i.find(function(t){return-1!=t.zones.indexOf(r.CD_ENVRN_ACCDN?+r.CD_ENVRN_ACCDN:r.CD_ENVRN_ACCDN)}).id,entities:e.map(function(t){return s.sum(t.map(function(t){return+r[t]}))})}})})},t.prototype.loadAccidentsPerDaysOfTheWeek=function(){var t=["D","L","M","M","J","V","S"],e=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],n=a.range(7).map(function(n){return{id:n,label:t[n],name:e[n],value:0}});return this.accidentsFiltered.then(function(i){return a(i).groupBy(function(t){return t.weekday}).toPairs().map(function(n){return{id:+n[0],label:t[+n[0]],name:e[+n[0]],value:+n[1].length}}).unionBy(n,"id").orderBy("id","asc").value()})},t.prototype.loadAccidentsPerMonths=function(){var t=["J","F","M","A","M","J","J","A","S","O","N","D"],e=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],n=a.range(12).map(function(n){return{id:n,label:t[n],name:e[n],value:0}});return this.accidentsFiltered.then(function(i){return a(i).groupBy(function(t){return t.month}).toPairs().map(function(n){return{id:+n[0],label:t[+n[0]],name:e[+n[0]],value:+n[1].length}}).unionBy(n,"id").orderBy("id","asc").value()})},t.prototype.loadHourlyAccidents=function(){var t=this,e=a.range(12),n=a.range(24),i=a.flatMap(e,function(e){var i=a.range(1,t.daysInMonth(2015,e+1)+1);return a.flatMap(i,function(t){return a.map(n,function(n){return{month:e,day:t,hour:n,weekday:new Date(2015,e,t).getDay(),val:0}})})});return this.accidentsFiltered.then(function(t){return a(t).filter(function(t){return null!=t.month&&null!=t.day&&null!=t.hour}).map(function(t){return new Date(2015,t.month,t.day,t.hour)}).groupBy(function(t){return t.getMonth()+"-"+t.getDate()+"-"+t.getDay()+"-"+t.getHours()}).toPairs().map(function(t){var e=t[0].split("-");return{month:+e[0],day:+e[1],weekday:+e[2],hour:+e[3],val:t[1].length}}).unionBy(i,function(t){return t.month+"-"+t.day+"-"+t.hour}).sortBy(["month","day","hour"]).value()})},t.prototype.loadAccidentsByRA=function(){return Promise.all([this.accidentsFiltered,this.loadMRCPopulationData()]).then(function(t){return s.nest().key(function(t){return JSON.stringify({region:t.region,regionCode:t.regionCode})}).entries(t[0]).map(function(e){var n=JSON.parse(e.key),i=s.nest().key(function(t){return JSON.stringify({region:t.region,regionCode:t.regionCode,mrc:t.mrc,mrcCode:t.mrcCode})}).entries(e.values).map(function(e){var n=JSON.parse(e.key);return{code:n.mrcCode,name:n.mrc,population:a.find(t[1],function(t){return t.mrcCode===n.mrcCode}).population2015,totalAccidents:e.values.length}});return{code:n.regionCode,name:n.region,population:a(i).flatMap(function(t){return t.population}).sum(),totalAccidents:a(i).flatMap(function(t){return t.totalAccidents}).sum(),mrcs:a.flatten(i)}})})},t.prototype.loadMRCPopulationData=function(){return this.http.get("assets/data/population_mrc.csv").toPromise().then(function(t){return s.csv.parse(t.text(),function(t){return{mrcCode:+t.CodeMRC,population2015:+t.Population2015}})})},t.prototype.loadAccidentByRegions=function(){var t=["Bas-Saint-Laurent","Saguenay–Lac-Saint-Jean","Capitale-Nationale","Mauricie","Estrie","Montréal","Outaouais","Abitibi-Témiscamingue","Côte-Nord","Nord-du-Québec","Gaspésie–Îles-de-la-Madeleine","Chaudière-Appalaches","Laval","Lanaudière","Laurentides","Montérégie","Centre-du-Québec"],e=a.range(17).map(function(e){return{id:e+1,label:t[e],name:t[e],value:0}});return this.accidentsFiltered.then(function(n){return a(n).groupBy(function(t){return t.regionCode}).toPairs().map(function(e){var n=t[+e[0]-1];return{id:+e[0],label:n,name:n,value:+e[1].length}}).unionBy(e,"id").orderBy("id","asc").value()})},t.prototype.getHoursPerDay=function(){var t=s.format("02d"),e=a.range(24);return a.map(e,function(e){return t(e)+"h"})},t.prototype.daysInMonth=function(t,e){return new Date(t,e,0).getDate()},t}();u=c([n.i(i.Injectable)(),l("design:paramtypes",["function"==typeof(p=void 0!==r.b&&r.b)&&p||Object])],u);var p},X3MM:function(t,e,n){"use strict";var i=n("3j3K");n.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},o=function(){function t(){}return t}();o=r([n.i(i.Component)({selector:"nav-bar",template:n("n0n0"),styles:[n("yTh5")]})],o)},YWx4:function(t,e,n){"use strict";var i=n("3j3K"),r=n("Wj5D"),o=n("0fHH");n.n(o);n.d(e,"a",function(){return s});var a=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},s=function(){function t(){var t=this;this.options=new o.MnFullpageOptions({scrollingSpeed:1e3,menu:".navigation",css3:!0,anchors:["home","stats","when","where","who","final"],onLeave:function(e,n){t.currentIndex=n}})}return t}();s=a([n.i(i.Component)({selector:"app-root",template:'\n    <nav-bar></nav-bar>\n    <div [mnFullpage]="options"\n         [mnFullpageKeyboardScrolling]="true"\n         [mnFullpageControlArrows]="false">\n      <div class="section fp-section">\n        <home-view></home-view>\n      </div>\n      <div class="section fp-section">\n        <stats-view></stats-view>\n      </div>\n      <div class="section fp-section">\n        <when-view></when-view>\n      </div>\n      <div class="section fp-section">\n        <where-view></where-view>\n      </div>\n      <div class="section fp-section">\n        <who-view></who-view>\n      </div>\n    </div>\n    <filters-panel [currentIndex]="currentIndex"></filters-panel>\n  ',providers:[r.a]})],s)},Ybm7:function(t,e,n){"use strict";var i=n("3j3K"),r=n("ErHN"),o=n("Za4h"),a=(n.n(o),n("M4fF"));n.n(a);n.d(e,"a",function(){return l});var s=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(){this.svgMargin={top:20,right:0,bottom:100,left:0},this.imgSize={x:30,y:30},this.imgSizeLegend={x:15,y:15},this.imgMargin={top:5,right:3,bottom:5,left:3},this.nbImages={x:10,y:10}}return t.prototype.ngOnInit=function(){var t=this,e=o.select(this.element.nativeElement),i=(this.imgSize.x,this.imgMargin.left,this.imgMargin.right,this.nbImages.x,(this.imgSize.y+this.imgMargin.top+this.imgMargin.bottom)*this.nbImages.y),s=n.i(r.c)(e,800,i,this.svgMargin),c=[{id:0,name:"Bicyclette",totalAccidents:1e3},{id:1,name:"Autobus",totalAccidents:5e4},{id:2,name:"Auto",totalAccidents:200},{id:3,name:"Véhicule d'urgence",totalAccidents:1e4},{id:4,name:"Moto",totalAccidents:1e3},{id:5,name:"Piéton",totalAccidents:100},{id:6,name:"Véhicule récréatif",totalAccidents:300},{id:7,name:"Taxi",totalAccidents:1e4},{id:8,name:"Camion",totalAccidents:2e4},{id:9,name:"Autres",totalAccidents:2e3}],l=a.sumBy(c,function(t){return t.totalAccidents}),h=this.lrm(a.map(c,function(t){return 100*t.totalAccidents/l}),100),d=a(c).sortBy(function(t){return t.totalAccidents}).reverse().map(function(t){return t.proportions=h[t.id],t}).value(),u=a.flatMap(d,function(t){return a.fill(Array(t.proportions),t.id)}),p=o.scale.category10();p.domain(a(10).range().map(function(t){return t.toString()}).value()),s.selectAll(".entity").data(u).enter().append("rect").attr({x:function(e,n){return n%t.nbImages.x*(t.imgSize.x+t.imgMargin.left+t.imgMargin.right)},y:function(e,n){return(t.imgSize.y+t.imgMargin.top+t.imgMargin.bottom)*Math.floor(n/t.nbImages.y)},width:this.imgSize.x,height:this.imgSize.y,fill:function(t){return p(t)}});var f=s.append("g").attr("class","gLegend"),g=f.selectAll("g").data(d).enter().append("g").filter(function(t){return 0!=t.proportions}).attr("id",function(t,e){return"who"+e});g.append("rect").attr({x:function(t,e){return 0},y:function(t,e){return 0},width:this.imgSizeLegend.x,height:this.imgSizeLegend.y,fill:function(t){return p(t.id)}}),g.append("text").text(function(t){return t.name}).attr({x:function(e,n){return t.imgSizeLegend.x+10},y:this.imgSizeLegend.y});var m=this.nbImages.y*(this.imgSize.y+this.imgMargin.top+this.imgMargin.bottom)+30;g.attr({transform:function(t,e){var n=0;return e>0&&a.range(e%5).forEach(function(t){var e=o.select("#who"+t),i=e.node().getBBox();n+=i.x+i.width+15}),5==e&&(m+=40),"translate("+n+", "+m+")"}})},t.prototype.ngOnChanges=function(){},t.prototype.lrm=function(t,e){var n=e-a.reduce(t,function(t,e){return t+Math.round(e)},0);return a(t).map(function(t,e){return{i:e,v:t}}).sortBy(function(t){return Math.round(t.v)-t.v}).map(function(e,i){return{i:e.i,v:Math.round(e.v)+(n>i?1:0)-(i>=t.length+n?1:0)}}).sortBy(function(t){return t.i}).map(function(t){return t.v}).value()},t}();s([n.i(i.ViewChild)("imagegridcontainer"),c("design:type","function"==typeof(h=void 0!==i.ElementRef&&i.ElementRef)&&h||Object)],l.prototype,"element",void 0),l=s([n.i(i.Component)({selector:"imagegrid",template:'\n    <div #imagegridcontainer class="imagegrid-container"></div>\n    <p>* Les données représentent l\'ensemble des entités impliquées pour chaque accident.</p>\n  ',styles:["\n    :host .imagegrid-container {\n      width: 100%;\n      height: 100%;\n    }\n    \n    :host /deep/ p {\n      text-align: center;\n    }\n  "]})],l);var h},fQyF:function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,".tab{height:100%;border:1px solid #404041}.tab>.tab-header{display:-webkit-box;display:-ms-flexbox;display:flex;box-sizing:border-box;width:100%;height:30px;line-height:30px;padding:0;margin:0;border-bottom:1px solid #404041;text-align:center;list-style:none;-ms-flex-wrap:wrap;flex-wrap:wrap}.tab>.tab-header>li{box-sizing:border-box;background-color:#f1f1f2;cursor:default;-webkit-box-flex:1;-ms-flex:1;flex:1}.tab>.tab-header>li:not(:last-child){border-right:1px solid #404041}.tab>.tab-header>li.active{color:#fff;background-color:#6d6e70}.tab>.tab-content{position:absolute;top:30px;left:0;right:0;bottom:0}",""]),t.exports=t.exports.toString()},"hO/x":function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,":host .container{width:100%;height:100%}:host /deep/ .axis{shape-rendering:crispEdges}:host /deep/ .axis line,:host /deep/ .axis path{fill:none;stroke:#000;shape-rendering:crispEdges}:host /deep/ .barchart .x.axis line{display:none}:host /deep/ .barchart .bar{fill:#445d77}:host /deep/ .title{font-size:13px;font-weight:700}",""]),t.exports=t.exports.toString()},"i+t5":function(t,e,n){"use strict";var i=n("3j3K"),r=n("Za4h"),o=(n.n(r),n("8hZP")),a=(n.n(o),n("rJzN"));n.n(a);n.d(e,"a",function(){return l});var s=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(){this.isInitialized=!1}return t.prototype.ngOnInit=function(){var t=this,e=this.config.margin,n=this.config.width-e.left-e.right;this.height=this.config.height-e.top-e.bottom,this.g=r.select(this.element.nativeElement).append("svg").attr({class:"barchart",width:"100%",height:"100%",viewBox:"0 0 "+this.config.width+" "+this.config.height}),this.config.title&&this.g.append("text").text(this.config.title).attr({class:"title",x:this.config.width/2,"text-anchor":"middle"}),this.g=this.g.append("g").attr("transform","translate("+e.left+","+e.top+")"),this.xScale=r.scale.ordinal().rangeRoundBands([0,n],.1),this.yScale=r.scale.linear().range([this.height,0]),this.xAxis=r.svg.axis().scale(this.xScale).orient("bottom"),this.yAxis=r.svg.axis().scale(this.yScale).orient("left").tickFormat(r.format("d")),this.updateDomains();var i=o().attr("class","d3-tip").offset([-10,0]).html(function(t){return t.name+": "+t.value});this.g.call(i),this.g.append("g").attr("class","x axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis).selectAll("text").data(this.config.dataset).text(function(t){return t.label}),this.g.append("g").attr("class","y axis").call(this.yAxis),this.g.selectAll("rect").data(this.config.dataset).enter().append("rect").attr({class:"bar",x:function(e){return t.xScale(e.id)},y:function(e){return t.yScale(e.value)},width:this.xScale.rangeBand(),height:function(e){return t.height-t.yScale(e.value)}}).on("mouseover",i.show).on("mouseout",i.hide),this.isInitialized=!0},t.prototype.ngOnChanges=function(){var t=this;if(this.isInitialized){var e=1e3;this.updateDomains(),this.g.selectAll(".y.axis").transition().duration(e).call(this.yAxis),this.g.selectAll("rect").data(this.config.dataset).transition().duration(e).attr({y:function(e){return t.yScale(e.value)},height:function(e){return t.height-t.yScale(e.value)}})}},t.prototype.updateDomains=function(){this.xScale.domain(this.config.dataset.map(function(t){return t.id})),this.yScale.domain([0,r.max(this.config.dataset,function(t){return t.value})])},t}();s([n.i(i.ViewChild)("container"),c("design:type","function"==typeof(h=void 0!==i.ElementRef&&i.ElementRef)&&h||Object)],l.prototype,"element",void 0),s([n.i(i.Input)(),c("design:type","function"==typeof(d=void 0!==a.BarChartConfig&&a.BarChartConfig)&&d||Object)],l.prototype,"config",void 0),l=s([n.i(i.Component)({selector:"barchart",template:"\n    <div #container class='container'></div>\n  ",styles:[n("hO/x")]})],l);var h,d},kZql:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={production:!0}},mHLs:function(t,e,n){"use strict";var i=n("3j3K"),r=n("2RnA"),o=(n.n(r),n("ErHN")),a=n("Za4h");n.n(a);n.d(e,"a",function(){return l});var s=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){if(this.config){var t=this.config.settings.gridSize,e=(this.config.settings.labels.y,this.config.settings.labels.x,this.config.settings.margin),i=this.config.settings.colorScale,r=(this.config.settings.legendSize,t.x*t.nx),s=t.y*t.ny,c=a.select(this.element.nativeElement),l=n.i(o.c)(c,r,s,e);n.i(o.e)(l,this.config.dataset,t,i)}},t.prototype.createTimeLabels=function(t,e,n){return t.append("g").selectAll(".timeLabel").data(n).enter().append("text").text(function(t){return t}).style("text-anchor","middle").attr({x:function(t,n){return n*e.x},y:0,transform:"translate("+e.x/2+", -6)",class:"label"})},t.prototype.createDayLabels=function(t,e,n){return t.append("g").selectAll(".dayLabel").data(n).enter().append("text").text(function(t){return t}).attr({x:0,y:function(t,n){return n*e.y},transform:"translate(-6,"+e.y/1.5+")",class:"label"}).style("text-anchor","end")},t}();s([n.i(i.ViewChild)("container"),c("design:type","function"==typeof(h=void 0!==i.ElementRef&&i.ElementRef)&&h||Object)],l.prototype,"element",void 0),s([n.i(i.Input)(),c("design:type","function"==typeof(d=void 0!==r.HeatMapConfig&&r.HeatMapConfig)&&d||Object)],l.prototype,"config",void 0),l=s([n.i(i.Component)({selector:"heatmap",template:'\n    <div #container class="container"></div>\n  ',styles:[n("17re")]}),c("design:paramtypes",[])],l);var h,d},"n+f3":function(t,e){t.exports='<article class="sections">\r\n  <section>\r\n    <h1>Qui ?</h1>\r\n    <p>\r\n      La majorité des accidents impliquent des automobilistes. En effet, cela représente environ 80 % des accidents sur la route.\r\n    </p>\r\n    <div class="graphics-wrapper">\r\n      <imagegrid></imagegrid>\r\n    </div>\r\n  </section>\r\n</article>\r\n'},n0n0:function(t,e){t.exports='<nav>\r\n  <ul class="navigation">\r\n    <li data-menuanchor="home">\r\n      <a href="#home">&bull;</a>\r\n    </li>\r\n    <li data-menuanchor="stats">\r\n      <a href="#stats">&bull;</a>\r\n    </li>\r\n    <li data-menuanchor="when">\r\n      <a href="#when">&bull;</a>\r\n    </li>\r\n    <li data-menuanchor="where">\r\n      <a href="#where">&bull;</a>\r\n    </li>\r\n    <li data-menuanchor="who">\r\n      <a href="#who">&bull;</a>\r\n    </li>\r\n    <li data-menuanchor="final">\r\n      <a href="#final">&bull;</a>\r\n    </li>\r\n  </ul>\r\n</nav>\r\n'},pOuB:function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,":host{position:fixed;top:45px;right:20px;background-color:#fff}:host form{position:relative;height:100%;opacity:0;padding:10px;color:#231f20;font-size:.9em;-webkit-transition:opacity 1s;transition:opacity 1s}:host>.visible{opacity:1}:host fieldset{margin-bottom:10px;border:1px solid #bbbdc0;border-radius:4px}:host fieldset>legend{color:#6d6e71;font-size:.8em}:host select{width:100%}",""]),t.exports=t.exports.toString()},pXPn:function(t,e,n){"use strict";var i=n("3j3K");n.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},o=function(){function t(){}return t}();o=r([n.i(i.Component)({selector:"home-view",template:n("0fTb"),styles:[n("OzaX")]})],o)},payn:function(t,e){t.exports='<article class="sections">\r\n  <section>\r\n    <h1>Où ?</h1>\r\n    <p>\r\n      La plupart des accidents se sont produits dans la grande région de Montréal. En effet, cette région compte plus\r\n      de 200 accidents pour l’année 2015.\r\n    </p>\r\n\r\n    <div class="graphics-wrapper">\r\n      <tabs>\r\n        <tab tabTitle="Régions administratives">\r\n          <horizontal-barchart *ngIf="barChartConfig" [config]="barChartConfig"></horizontal-barchart>\r\n        </tab>\r\n        <tab tabTitle="Carte des MRC">\r\n          <div class="map-wrapper">\r\n            <geomap [json]="mrcJson" [config]="mrcAccidentDataset" searchText="Rechercher une MRC..."></geomap>\r\n          </div>\r\n        </tab>\r\n      </tabs>\r\n    </div>\r\n  </section>\r\n</article>\r\n'},rJzN:function(t,e){},tXfc:function(t,e,n){"use strict";var i=n("3j3K"),r=n("Wj5D"),o=n("Uqjm"),a=n("M4fF");n.n(a);n.d(e,"a",function(){return l});var s=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e){this.quebecMapService=t,this.accidentService=e}return t.prototype.ngOnInit=function(){var t=this;this.initializeGraphics(),this.accidentService.onDataChanged.subscribe(this.initializeGraphics.bind(this)),this.quebecMapService.mrcJson.then(function(e){return t.mrcJson=e}),this.accidentService.accidentsByRA.then(function(e){return t.mrcAccidentDataset=a.flatMap(e,function(t){return t.mrcs})})},t.prototype.initializeGraphics=function(){var t=this;this.accidentService.accidentsByRegions.then(function(e){t.barChartConfig={height:600,width:1e3,margin:{top:20,right:40,bottom:40,left:250},dataset:e}})},t}();l=s([n.i(i.Component)({selector:"where-view",template:n("payn"),styles:[n("/uoO")],providers:[o.a]}),c("design:paramtypes",["function"==typeof(h=void 0!==o.a&&o.a)&&h||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],l);var h,d},u4sc:function(t,e){t.exports='<div class="tab">\r\n  <ul class="tab-header">\r\n    <li *ngFor="let tab of tabs" (click)="selectTab(tab)" [class.active]="tab.active">{{ tab.title }}</li>\r\n  </ul>\r\n  <div class="tab-content">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</div>\r\n'},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("3j3K"),r=n("O61y"),o=n("Iksp");n("kZql").a.production&&n.i(i.enableProdMode)(),n.i(r.a)().bootstrapModule(o.a)},"xC+v":function(t,e,n){"use strict";var i=n("3j3K");n.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},o=function(){function t(){}return t}();o=r([n.i(i.Component)({selector:"stats-view",template:n("6Jx0"),styles:[n("xuGd")]})],o)},xuGd:function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,":host{text-align:center}#accident{margin-top:50px;margin-bottom:20px;height:300px}p:not(.reference){font-size:1.6em}",""]),t.exports=t.exports.toString()},yTh5:function(t,e,n){e=t.exports=n("FZ+f")(),e.push([t.i,"nav{position:fixed;top:0;width:100%;height:38px;background-color:#58585b;border-bottom:2px solid #404041;text-align:center;z-index:10}nav>ul{position:relative;top:-4px;padding:0;margin:auto;list-style:none}nav>ul>li{display:inline-block;padding:0 8px;font-size:2.3em}nav>ul>li.active>a,nav>ul>li.active>a:active,nav>ul>li.active>a:hover,nav>ul>li.active>a:visited{color:#f1f1f2}nav>ul>li>a,nav>ul>li>a:active,nav>ul>li>a:hover,nav>ul>li>a:visited{color:#a7a9ab;text-decoration:none}",""]),t.exports=t.exports.toString()}},[0]);